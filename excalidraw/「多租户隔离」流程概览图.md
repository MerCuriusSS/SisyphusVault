---

excalidraw-plugin: parsed
tags: [excalidraw]

---
==⚠  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. ⚠== You can decompress Drawing data with the command palette: 'Decompress current Excalidraw file'. For more info check in plugin settings under 'Saving'


# Excalidraw Data

## Text Elements
tenantHelper ^vSGpxwmH

SaToken ^e2nyP11s

拦截器(TenantLineInnerInterceptor)
&
处理器(PlusTenantLineHandler) ^6Mxzroqe

Redis ^ZtKgC4yx

1）tenantHelper：管理租户上下文
2）SaToken：管理用户登录状态上下文
3）Redis：缓存业务逻辑信息、动态租户ID、登录用户状态
4）拦截器及处理器：拦截原始SQL，追加Where 租户条件 ^vL0AJchf

%%
## Drawing
```compressed-json
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
```
%%