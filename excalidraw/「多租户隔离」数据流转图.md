---

excalidraw-plugin: parsed
tags: [excalidraw]

---
==⚠  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. ⚠== You can decompress Drawing data with the command palette: 'Decompress current Excalidraw file'. For more info check in plugin settings under 'Saving'


# Excalidraw Data

## Text Elements
mapper ^uWj1dD1D

DB ^4pGDRwLJ

1. 用户发起请求 ^4vKQITQd

3. 多租户拦截器拦截原生SQL
TenantInterceptor.intercept() ^4ZjCHdzr

2.mapper执行SQL查询 ^JByvBGnZ

TenantInterceptor ^PjZsYG8L

TenantContext
(ThreadLocal) ^7FiO24ZE

4.检查是否忽略租户隔离
TenantContext.isIgnore() ^8yDPMEZi

5.获取当前租户ID
TenantContext.getTenantId() ^qKbbTMZo

%%
## Drawing
```compressed-json
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
```
%%