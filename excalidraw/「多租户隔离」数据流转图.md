---

excalidraw-plugin: parsed
tags: [excalidraw]

---
==⚠  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. ⚠== You can decompress Drawing data with the command palette: 'Decompress current Excalidraw file'. For more info check in plugin settings under 'Saving'


# Excalidraw Data

## Text Elements
tenantHelper ^QDgbv8OQ

SaToken ^Wb5oQtv0

拦截器(TenantLineInnerInterceptor)
&
处理器(PlusTenantLineHandler) ^A9zEUM57

Redis ^Z4HEgWta

1.业务逻辑 ^P1Mnm3fX

2.2登录用户所属租户ID ^45N6WiQq

2.1切换租户/忽略租户 ^M0IsjqGm

3. 拦截原始SQL，
追加Where 租户ID条件后执行 ^r12zUrut

%%
## Drawing
```compressed-json
N4KAkARALgngDgUwgLgAQQQDwMYEMA2AlgCYBOuA7hADTgQBuCpAzoQPYB2KqATLZMzYBXUtiRoIACyhQ4zZAHoFAc0JRJQgEYA6bGwC2CgF7N6hbEcK4OCtptbErHALRY8RMpWdx8Q1TdIEfARcZgRmBShcZQUebR4ABm0AZho6IIR9BA4oZm4AbXAwUDBSiBJuCABBI2x6AEUAOQBOKDTSyFhESsDsKI5lYPayzG5nAEYANmTtAHYAVn4ymDHx

5vHteYAOROTxnkWiyAoSdW4p2c2lyEkEQmVpbmbk64hrQfFUBNfmKFI2ADWCAAwmx8GxSJUAMTjBCw2HDSCaXDYAHKf5CDjEUHgyESP7WZhwXCBHKIiAAM0I+HwAGVYEMJIIPOTfv8gQB1U6Sbh8I4QNmAhD0mCM9DMiqvDEPDjhPJocavNjE7BqFYKhLffno4RwACSxHlqHyAF1XhTyFkDdwOEIaa9CFisJVcAlyRisbLmEaSh1oPBPskjgBfH4

IBDEc7zWZbZKTbYLV6MFjsLhoAAsUyTTFYnEanDE3FmCVmex4C0OfsIzAAIhkoBHuBSCGFXpphFiAKLBLI5I2FDrFI5lLqfaBYNrXMoVCT1GvKTT0LYAeXqEGHoeHvqrkYk+gpbEImgAUkIa4iRwGXaR/lQN1Pt9Pd+gSJ3SFUeKQALIXzpXiQkre66DsGRxmvyQhwMQuANs+4yzMWzTpokkw8JMzRbK8RAcACNp2vgWFsKijZoM2+CtvykihAAK

hOAAyjq4aRLYIEUm6lNu5TPhAc4Lkuq7kqOlQNpgk78qMaATOmSTrM0zTzDwyTNAcMb7K86qoBM0abDsCRlpWZQnMQZwKjwGyxnJCTpjG8zjPMqEGTcdwPG0aAHK87xilqfqCkCOIQtC8JwkgbYomiHrYmCAX4uQHBEiS2RiX6VI0iKYoCmCkr8r5CBcsZPJuT8fxCmlY4SpGUrCDKcrnEqKpqucmqvDqkEGv24HJZaCDWmgtr2vyjrEM6AHjO6H

bEF6Rp9QR2XhnB1kXMk8zLdmKacNwyQ8M0q25hw+YcIWaCzOm0byeMyQvANtb1iRqBkRRfrtpixDdpkiXta8kHQbB5wIQkSFrMpf2EcRz73Qgrwia56ANhw1hQAAEkEiCQlKlC0aJwnZPDSP4Cj5IHjktKEEYnyJOanBQAAYrg+jUhpjnjqJVREMoaboGIORMOSyZQOYBAs/c7MQHTxDEEMrx6DkuCOkwPXoDUdRNK05IQvcjoEBj0PjnDOS4/jH

lCFAbAAErhCTnx/EIEP8thCBI/cjwKvEjNUcwWsMThTYsVhjF4TSbFLJxM7oM02DAgAagACsuna4ZD/7oL0/QfOSEmaQhLvqWMS06bs+yM0ZJmoPBfJ+rcjvQ/sZdlJ5nzeWUOX+Xi6AwsFCKhaiLVYs3wmxfFpJJWUKV0gyZWZRV2XFZy3K8kV7LCmPlTlWNfiSJNtX8sqKINRqDeQC1+qGgUHXD118vTQ6Trp28PCr56NVoI+/rdGgQYdOxjdz

dwsbpspS1/x2qmDaWxML8mTLtfah0S6THguMNYikHTXWCD9Zi5EbaPXGq9XsuQChbmHH+V+MMJy/i4pUDkmh5hsHqFAegbp7z4MHJAEOIsDxHlPOeKchCxyATYHeECD4CFkIkDAL8EcOQcCMHRSYpChIARvHw4CH8wKfSgjBW68FELIXGJqBSipbZ+16vhEGQIwY+0ojReihi7osUDkUYO3EKFUJoXQwSicmZD0gOnZwm1tDxjkqWcY6YTr6WzqZ

bQ6xZjNEmFsRM/Ii4FVQDsbQWxAbplQlsZoCQHKvAri5XkjM67cH3gKaeIIootwgG3IK5JkRdwir3GKhJiSDwJtSUeopx4snnkKPKxca4CDKaVZeE9V7VW9JvP029VSwEaiUw+bUT7mnPs+S+A1r4ulSJVZ6G8jH9R8t/DM2xkIJHmJmIB6037lguXtAsnwpjJFmKXJaSC6woNuuDNsWCezvSWRBNRqCS5/QBpkhIWwrImI+eYv0UNKi0lwNRIUX

A0YUC1nChFSKCaU2JqTXkJTCbU1pvTbgjMoaCzZpUTmDZUbgKYHzdw5Lhai3FiFfkUsoiy1IPLCAYdI4xzjqrUg6s4b4DRRIeFiKgTIv5LgI2ptza4rQFbDBZQ7YO3yc7dyFj3ZWK9mgh6qrrHTTsRxAa3FsARwjvQXwAIthuKIRAZORTXjeMUlsLO/INI8C2hE+C0TYmF1nm/WBuTnJOxLmZDyAwvI9L8hUwK7dWWPTCt3SKuI+7NISmSc07Thl

MlGbG3KQbeCFrzeKAt/JpTr0fiXOqO9Zl72ahiI+H1+QWlpt1VZxj1lDRvrgdM98Jo1ufnI1A79SifwEIc1Af95gYWjFqv0EDgFoEmOc2la1bkHU+NGNdQSsnbSum8hAgLPn8iel2H5fY8GDkfNwrGmMuHCIVs0IwnYACqX5oxKInYIphz6uJvg/N+WR7jeH8I/n+wcAHRHiMkdI0DDrwM/rAKBDop9IBfXUXBYFyEDhTHGGAv02EmKoDWcRoipj

vboNyZY0SntSPgxNUOHclQqivo/V+2Y9qxywpdWMRScQeB/1iVEraMS4l+i9QpX1USJOBvyhtdM7q5LNArFsOdjzXZhuhpJ2u0b66Fsaa3IKHdz0poafGppcUWmJTaalJe+bulTwXn0xJAzSkLzLRlZzfoq27NrVveqDaS5NW1M2xZaBTTLI7RfbtVYNkAXmIOgL5Gv63VgesHRW19FLpzCu1AOSN2QLuRtdCBd5KvJumYmj57vlvWvVFjDEAsOA

s0f9bRswzJbEmJCmrBrOgkIkIAM6NABURoACzUAAUtFdZQE9t1DgsouVc1EAgOAxtSAAEoAA6HAABku3AAgmoAMBcptR18Dq2b82EbWBZVt906MhvoDG1Nmb8N5t6kW3LFbYh1sQh2/to7p3JvnaEJd97ssbtYmCPdimRMLZ4rh4Sum+AGaQwnIyyliVuarXpQLVmTKSAsvJOymWS3uUWqtTau1SohX+E1k9iAL3pvYxyB9r7y3qW/Y2wDg7HATt

nYu29tnkPbsw82+SWVxszasEVagZVvtZTqvDRsRdZQ3Ye2sWe4jRr8LMYcZUAA4gCAA0u+gAGsCc3CMeM9AQH0Z14kBN6Q9VJgTqE856QLq8BJG19hXEojpjamdCkGeKUZqzJnE21Is+NYz0B+62ezW23Njny2+cbmUtzc8XMlTTz5rKfmqrVomQqOtMyNI6PmRF4+TWYtWi7fs6ciX0C4Bkdsh+pfUAjsTuO1DYYNHllQltXYNyf5qZuVAz4Oxk

KRMq0e6r1GBsQAvS9K9uCouMOgyw9Myg6LYD1PoTsJtEM8IURBidKj/nfQ0bhtY0xkjZMV6RtLkBwSgyXyqm4dG5ta9sb++xM1SoAALXTARk7GUA5CiFt3xBIX40klLld2WAEz2G0DBXzjV2OGLXmBmC2jkhOSmEmASDsl60D0rgKSjVTjQBKSbkjyqVMyTTKDqXCjjzoIJBsyzU8UpFT06RGQz0GVc2LQ8xym8xXm2XGSNFyzKGmV3lC2r11Ei2

NGa3bQb39hmgS17RdBp0rXGlS3i3SzgkeSskmFLCiTHzQEZmXTzFKwVCCRMPBQukPSrGQRPShVq0wWemwV+Tr2v2w1+i0UIzjGmFIIow/31S/w8UqDNkcDyBRTFXQGiOrCxXhzl3JjbUphphRzR35DJQJ0qGCApC4N5n5nwEx3xGVBJ0pjJzlkb3UOkLpw1lFUZ0SNiJlTlRlwRyVVIGtkV3tiD01Vdh/wY0/2fzUP1yAIkF3330P2PxgNb3PzTj

GGsjmEZg0h8WWk91CXiWLQ2G03IIVAUkoJjVzzjXTQkGqWChj3qVYLOJhkT04Psw6XSjEJOKLUU0KleNEIrSLzXgCykMgBkJCyrybQUNryUPr07TUKvk0IAmaBS2HWHBfjJhDAH2fFLAyUeXnzy03RJX+IYHy2sO3TxXgislLEySq3eX6wiNXy8Ma3BN8LazvyyT0mklGL2TqLf0ozcOXzgEPDpIHA6AFI6H3lKASGHAwzACFNKF2K4Tsh4HFKvx

8iiFICgAACFBpHRlAoT+RshiB1SsRNTuBn4MgcFuVjczdLdrcLwRY2AhpKhHQHBGDh5CBMAIwo4+ToYpSwAkh5gEhhMuEkgSCcslISweAthrIYkFTIMp4SQoAqhz9bhcBajXhdT4zbxEzuJkMUz8B2wKBuSIj9A2BGAvwSB3THRcguR1BaToZtd1chi/90FxjWMJAo5xgvwOB9BkgKRzc5jIj4DNJFIkDIA1iLp5g0DdIti/Rfc0AkI0DAZQVzoT

DCMiN1d+jeBQ8qCvgI9bj6Do9O4WDnp492CB47Mc0HNeCnNC9M9BD3iS1Pj88XifiJDJlpDgtK8ws/QFkwTos20VltSNDhpW8qh4Su9X8BRp0dE/4nl5JLCCT2ZEFitUwp9GprI0JlMtoKTXCqSvlPD19W0/RWtb8AjYk/STC+sRicjGcNhAAsOUAEKlQAbgTABE+Ie1RSou0DoqYuSKgBxTJnxQyKJVRxJXR2ZjyIkAKKKLpRKLKJhgqMliqM5T

iybwBIaJFXiIgBooYuYsNmlwVUtm6IiLVTXNV0GJ1XowbOXxIzGIANNWbPQH3EPBPDPF7KzKd0kguniAQnTGSHBQPTQtWLGGUk2ILk1BCrxOnN4G0CCTBSyU2mQiWmOjxLyXDVsjQJCrSvSqCSOMM1ePjwuLM2TWuMPLYPuNaTPKeK6SvIEN6SENLQfO+LKH8xrTxMBPfPkNam/OUL/PZOhMAreD1BAp9ERNHXlOjIOQy1jD0j0hWkQsuVQF9Mnx

sJLn2D0jjDnUZmrGPVPWhSYPqxwXwrKEIpwy0XLGLBDLZLI30M5LCJsXcLKF5PLP7GHC9JFO9PFKnC9LiCitBVisUmjHXSYRSvSqBs1CCSjNKGa1+FjP1McAGCNMRJNMSm5UVgaBaE8UgELLtIkAhE0DUGtKpFdOIDLLJE3yYSSAQkSFiTknOhOngT2ADLmC6zBSiXWGSBpvOjBv7x1KxGhsNKfnhvX25V5WjljnjkRIxrHGxtxqnG4IJqJs9IIS

SBOtjA0yUi61SWmCcMHEVoQmVpwLUzDIeWaA5snVKVjLTL4QzP/LKFTITJCEzIWOzNzPzNo1Mt/z1RuuX0LOLNLI9OYErMkGrM/ybKfEqBOkaEmC5HqAAEdey+NXKvghyIBK8nlZN/U9MsDbyzJmgIlmbwV0kA1Q19j1ysrw8cq6C8qnSV9Y8iqdzjyk8uCR4vj+DPNqrM7aqLz09KrHVi8/jy9ZDgTwtQT9rIAVDITuqe1ercBjwBqrap0NFzpU

kEIFhZhzCS50kFqiSDidg1MdE51MKtrbqkRdrvD6SCKAUiKOszIEqcDyLwjhLtYhNABvN0AFV9QACldAB2I0AAEjQAPR1AB9z3fr1E4UrUe0xgkCfrfq/r/oAaAeSmxU6N4D4pyEyOJQsPvukogHEp5kkoZVEpkrgEqOlgUuTK3hUoZ1AfQHAY/p/v/sAcl3aN0u4AVwMSVyMsTo111UY22rf11wDmspYxDokFfHfE/B/ATiQwdvjomGEz8Xkn8X

QlQgcjxLWMCu2AwIU2LiSFgT2CeSWhZMmAf0Lo1THSmADz9CKWoO3OiijxqX3NTSPJKtPJT3POePqqqpnjbvvI7oL0nifJL0kL7qBI/LKC/OHspC6ouqUvKBbzeDohnr5ug2GpRNmkHxwNZuUjIpmvZimFgs3WQo1HWGsgcPWpcIPuXxpLwr+TPpvyOsvr+jOuYZf0uowa5Owv5Huv5KeoVoDLes6dJr8XOjgV0dZv0Yui4T2EmE2A5ohuVLVI1N

hvib9ARpyCRtqBRpVmlvFsqElrRplrdI9JvS1viE2ljFUeiuWm9W8vptmCXL3SiUgusgQmNpTO5rma1IWetoFvNUtWtSEFtWtM2axtIBxp2fxr2fLIOeFJSCmD/mWoQj1qWmmHpvGZhcSDhaUiWjUyeZjJVPNooEtvHsWaxFxfxfmKAkdr4Wdv5C9oQBLMJt9v9sDrvu1U13dqYz4YNwkC/ASD1GYAACso7Dd9BY64DJHhnE61jpH0CvdMCIBwrA

YjmAkoLloNMkJDHw0ZXzGtyy6dyK6riDye5irM1SqnHyq+Cu6cps8PilSvM6rm7Gqu9mq3y5kQT2rQnR7FKOSomYTW9RGdCdka0wKwhbo51rnlo9IV7Mn/CN7oFEgglthNo1h97KWPDL0GsN9T6Drz6amkIzJUI5IVyrqqMmWYVGdPrABwJUACNjf+hQQAX/1ABTV3/pYrUvLarfftrYbffq4p4sR3SKQYEuyJLZEqFnyIQEKKwZVKktwegFkrZX

kvJ2IamVIaaPIYgBberfrcbe0vlVlz0p6OYb6KLuMpdpZc4cPowZ4fwGDuYW4lgwkSkXbxyLAwkb9FdTHLBWCXknLDskeTDLCVQECszDkwLu2NvI2Aug/YUieRwK6xjHTDVarkuZlTDwse1asd3JsfM0KoNdroceT2Sh4JcebotZqs8cI67vtf8aC3rVapdZbUqbPliwXeb29beEaDie7yGsThGr4bnsMOU3kmshLFXrjejd4pIvQlSTxI2sX2LZ

2twrTdCcOv8NqdOqyXOrAvfyLY9oiPafTalOeu6cHAlK9LA9ZtnS/eg/LHDNlO8qmaKihtebhugyWagEFvDmFoFQ2dtIlqBalsRNBbpfBZJsOcfzBR630blP8QwnpvQiywum8uslZs1D7zABNCScJb1Mc/ecgBc4p2+ep3+e8/tLihICdJHpdLBeJuNAVs2BBTDIOGUwjJOnps1EzE2kUiitnR6xjCxaVLNttqTNnowCJYG/trJZ1JzIpdab9Gpd

pblr9rUADvXwovLnrNZf/05psoEfQDYARimEIFVMwBgcvHEfG5fdWGWN9KeRy1iX0eub/bjDiDn3kx92LUVujH2HWFu5MITA8ySqrlAVMf003JoLKVyoYL1bscNY4ONfw+cYqp8evNbv6XbrI8R8gAo5fIBKdcbUHtdfo5HvCbAsGknqjnY57yIW4824MPH1AQ00y2E7QlE7xWWmeGyQ0yTem7k9Tb2oJ5ayzeU5zYOGEwQnU6ac0+Tbut9ohclK

6YVp6cHGepdmu6++uZ+9iQGWlMB/mDs+xdmYNPmYic9d1J5sN8DZmeJbtqG5tvTKt/kTO4+adq5+/1duGPCKvYA1IH2CMHfW6K4NHT7Mkf2EuBlY0kzGzsA7TvUfc2LBSWZq8vDNDaK3LjXPmqQ5B8scqV1dscsxw6Nccbh9NcvPR5bvcZR9I4R7GT8ax4gBaudbx7o58M6kY6G5J77TXA7yHVAqaaDefAmvBTXWeFXsUk1sgCsK3WgTUy8uiUeS

k5Kcl6Pvk956b8zeqcF7w2mHshKQl+d8iIkBmFQDG0AHzlQAac1aR6g6JAAYf920AF/4wAAqUORbhAhUAaGaxABDc0ADe5QAOBVABzI0ABkIptozgP7H8z+F/a/hwHv6P8mACAF/tA0/6/8ABSObtm5EQbI4UGc1NBlO0wa45J2w7covgzkqEN52Q3NWPTmXbaxgBo2U/ufyv638H+T/GAa/3gH/86GOlHdow30q9FlcVcNhmt1PYWUL2HvFhBSF

VJRx6AUAZICbGSxiNeMIrc7m5USDisxgZyH0hOW9wgdi4OBDYPJAwiqY/SrNRDin0PZBNIAmrUHgvHB57lMO+rNNGhzroPEyqTdc1lnhI7Ws88XjR8g1R7pNUAmNHBvooR/LN9VCBLZjpPRPyd89CkTXvgUhppIR06+JHElcjg6ZM8mc1cMnnXWDFNNqt0JhimzXwKc+eSnBULhis601LooRLTrWUGwrtxggASH/YYOMZGEwEABY/4AELvY7P/UA

BQcoAGg5QAOGmu2HgLUIlRIo2hx2D+i/UABtToAEADHof0I4DJBahLRZoYAGR/QABraHFRioAEP5QAPYGgAQAZAAFUpTDX+uwl+h/WmG7Z0wtQl7IACnlAXM0JAE0DL+kAhgbAM/6ACah9Q1nIjCaGkBRhXQvoQMKGEYopUow8Yc/WmGzDdsCwpYWsI2E7CDhRw6BicIgbnCOAlwm4XcIeFgDnh0A14R/y7bwM0isDPtlkSEqUUh2FKMSqOwkoTs

cGeAvBgQw5TECQhylYVGQ21h1CGhesH4X8PfqQiOAgw4YSCPaFgiIRAI+YYsIjDVgVh6wzSvCMOHHDTh79VEeiImy3DTs9wqgaAKv44jn+/9N4Vuw6Jy5chhqFhoe14Gu9zKBlQQZflS78A3gcAOAPSHUROdOgtwLIPkXIJLAGAhABABQFVLV1sOaHKEBSFDFhjhgEAbACIEHh6gGw+gekBYPLoQ9vRUYm8IjTjEBisOtgypPYNh6QBUxMYuMVTA

I6V8Ux0Y9MZkATHI93MZYtMcszjFVigQTgxHpGPLH1jMgJsbwQ61rGFjMgy4HHnIR7EVj9AVMfiqSNQZFBWxdY1zkWLgapEG4U43sfoC1joNsBk4gscOOdE4tRuVtRccOM7Ajdbeg3e3ooiHHtj9AuLaiO4gigRiNx54qmF1E7Fig0sAobAP8BpA9kMwxBJAq+PfH4AAAmkWB6yp0Xuk4owGwAMCuix+BAa2OcGYx7jzxnY/1l3m7rPQIx6IEgMg

IQbeiMJxAekGtjJHBMhUxAL8N5wPG4BNAwQLnhAFwnGZOIqpMENxFIALhcAk2K+tQF4DwQOJ7EhOvMAlyvAzYygO0CSB6AsS2Jj+biRJN4BSSfSEueCXeO4plJ+xfMTgFNH0JhMO0ZsJ0EKkN6cRsYlEnIZwLZREB8GXRPdn6DhgeizJERYQFADtgcDzJZQfQCSCBCkBGgHaByQWRclMByJBk58Mqngl2BeW9uXILSDhhwBSJQ0XyVRJW6mC+ghA

RgIijBBQSkSy8DIPFPWiSwwcxsZcYnA04tNYphPAwLSHSkqT2YVQjBqEDjLxTEpEE/AFZWp4QAYiFE4IKCC5iiQvw2QIQEHU27cFggPoUCMGCAA=
```
%%